{
  "name": "Send an email",
  "description": "Send a new transactional email.",
  "documentation": "https://mandrillapp.com/api/docs/messages.JSON.html",
  "fields": [
    {
      "label": "From email",
      "properties": {
        "parameter": "fromEmail",
        "fieldType": "email",
        "value": "notifications@kotive.com",
        "helptext": "The email address to send this notification from"
      }
    },
    {
      "label": "To",
      "properties": {
        "parameter": "to",
        "fieldType": "list",
        "fields": [
          {
            "label": "Email",
            "properties": {
              "parameter": "email",
              "fieldType": "email"
            }
          },
          {
            "label": "Name",
            "properties": {
              "parameter": "name",
              "fieldType": "text"
            }
          },
          {
            "label": "Type",
            "properties": {
              "parameter": "to",
              "fieldType": "select",
              "options": ["to", "cc", "bcc"],
              "value": "to"
            }
          }
        ]
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "Subject",
      "properties": {
        "parameter": "subject",
        "fieldType": "text"
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "Message",
      "properties": {
        "parameter": "message",
        "fieldType": "textarea"
      },
      "readonly": false,
      "required": true,
      "visible": true
    }
  ],
  "method": "POST",
  "endpoint": "/messages/send.json",
  "request": {
    "key": "{settings.mandrill.apikey}",
    "message": {
      "html":"{field.message}",
      "subject":"{field.subject}",
      "from_email":"{field.fromEmail}",
      "from_name":"{group.label} (via Kotive)",
      "to": {
        "email": "{field.to.email}",
        "name": "{field.to.name}",
        "type": "{field.to.type}"
      }
    }
  },
  "response": {
    "success": [
      {
        "email": "recipient.email@example.com",
        "status": "sent",
        "reject_reason": "hard-bounce",
        "_id": "abc123abc123abc123abc123abc123"
      }
    ],
    "error": {
      "status": "error",
      "code": 12,
      "name": "Unknown_Subaccount",
      "message": "No subaccount exists with the id 'customer-123'"
    }
  }
}
