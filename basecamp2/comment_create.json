{
    "name": "Create a comment",
    "description": "Creates a comment.",
    "documentation": "https://github.com/basecamp/bcx-api/blob/master/sections/comments.md#create-comment",
    "fields": [
        {
          "label": "Project id",
          "properties": {
            "parameter": "projectId",
            "fieldType": "text",
            "helptext": "ID for the project you want to create the comments for."
          },
          "readonly": false,
          "required": true,
          "visible": true
        },
        {
          "label": "Select the section you want to create the comment for",
          "properties": {
              "parameter": "section",
              "fieldType": "select",
              "choices": [
                  {"key": "messages", "value": "Messages"},
                  {"key": "documents", "value": "Documents"},
                  {"key": "forwards", "value": "Forwards"},
                  {"key": "calendar_events", "value": "Calendar events"},
                  {"key": "uploads", "value": "Uploads"},
                  {"key": "todolists", "value": "To-do lists"},
                  {"key": "todos", "value": "To-do"}
              ],
              "default": "messages",
              "classes": "inline",
              "helptext": "Select the section from the dropdown, you want to create the comment for, e.g. 'Messages', 'Documents', 'To-do' etc."
          },
          "readonly": false,
          "required": true,
          "visible": true
        },
        {
          "label": "Section id",
          "properties": {
            "parameter": "sectionId",
            "fieldType": "text",
            "helptext": "Provide the ID for the section you have selected above. E.g. the message ID"
          },
          "readonly": false,
          "required": true,
          "visible": true
        },
        {
          "label": "Content",
          "properties": {
            "parameter": "content",
            "fieldType": "textarea",
            "helptext": "Content of the comment, e.g. 'Yeah, really, welcome!'."
          },
          "readonly": false,
          "required": true,
          "visible": true
        },
        {
          "label": "Subscriber's id",
          "properties": {
            "parameter": "subscriberIds",
            "fieldType": "text",
            "helptext": "To notify subscribers about this comment, provide their person IDs (seperated by commas). Or to subscribe 'all' the people on the project to this calendar event enter the word 'all' in the text box."
          },
          "readonly": false,
          "required": false,
          "visible": true
        },
        {
          "label": "New subscribers",
          "properties": {
            "parameter": "newSubscriberEmails",
            "fieldType": "textarea",
            "helptext": "To 'loop-in' outside email addresses for users without an account, include a new subscriber emails list. Seperate email addresses by commas and no spaces E.g. 'example@example.com,example@example.com'"
          },
          "readonly": false,
          "required": false,
          "visible": true
        },
        {
          "label": "Subject",
          "properties": {
            "parameter": "subject",
            "fieldType": "text",
            "helptext": "Information about the comment to be displayed in the subject line of the email for users without an account, e.g. 'To discuss business'."
          },
          "readonly": false,
          "required": false,
          "visible": true
        }
    ],
    "method": "POST",
    "endpoint": "/projects/{field.projectId}/{field.section}/{sectionId}/comments.json",
    "request": {
        "content": "{field.content}",
        "subscribers": "{string_to_hash(field.subscriberIds)}",
        "new_subscriber_emails": "{string_to_hash(field.newSubscriberEmails)}",
        "subject": "{field.subject}"
    },
    "response": {
        "success": "",
        "error": {}
    }
}
