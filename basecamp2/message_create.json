{
    "name": "Create a message",
    "description": "Create a new message using Basecamp.",
    "documentation": "https://github.com/basecamp/bcx-api/blob/master/sections/messages.md#create-message",
    "fields": [
        {
          "label": "Project id",
          "properties": {
            "parameter": "projectId",
            "fieldType": "text",
            "helptext": "ID for the project you want to create the message for."
          },
          "readonly": false,
          "required": true,
          "visible": true
        },
        {
            "label": "Subject",
            "properties": {
                "parameter": "subject",
                "fieldType": "text",
                "helptext": "Information about the message to be displayed in the subject line, e.g. 'Hello everyone'."
            },
            "readonly": false,
            "required": true,
            "visible": true
        },
        {
            "label": "Content",
            "properties": {
                "parameter": "content",
                "fieldType": "textarea",
                "helptext": "Content of the message, e.g. 'This is going to be a GREAT Saturday!'."
            },
            "readonly": false,
            "required": true,
            "visible": true
        },
        {
            "label": "Private message",
            "properties": {
                "parameter": "private",
                "fieldType": "radio",
                "choices": [
                    {"key": "true", "value": "Yes"},
                    {"key": "false", "value": "No"}
                ],
                "default": false,
                "helptext": "To hide a message from clients select 'Yes', to reveal a message to clients select 'false'."
            },
            "readonly": false,
            "required": false,
            "visible": true
        },
        {
          "label": "Subscriber's id",
          "properties": {
            "parameter": "subscriberIds",
            "fieldType": "text",
            "helptext": "To notify subscribers about this message, provide their person IDs (seperated by commas)."
          },
          "readonly": false,
          "required": false,
          "visible": true
        },
        {
          "label": "New subscribers",
          "properties": {
            "parameter": "newSubscriberEmails",
            "fieldType": "textarea",
            "helptext": "To 'loop-in' outside email addresses for users without an account, include a new subscriber emails list. Seperate email addresses by commas and no spaces E.g. 'example@example.com,example@example.com'"
          },
          "readonly": false,
          "required": false,
          "visible": true
        }
    ],
    "method": "POST",
    "endpoint": "/projects/{field.projectId}/messages.json",
    "request": {
        "subject": "{field.subject}",
        "content": "{field.content}",
        "private": "{field.private}",
        "subscribers": "{string_to_hash(field.subscriberIds)}",
        "new_subscriber_emails": "{string_to_hash(field.newSubscriberEmails)}"
    },
    "response": {
        "success": "",
        "error": {}
    }
}
