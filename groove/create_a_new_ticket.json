{
  "name": "Create a new ticket",
  "description": "Create a new ticket.",
  "documentation": "https://www.groovehq.com/docs/tickets#creating-a-new-ticket",
  "fields": [
    {
      "label": "From email address",
      "properties": {
        "parameter": "fromEmail",
        "fieldType": "text",
        "helptext": "The email address of the agent or customer who sent the ticket."
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "From name",
      "properties": {
        "parameter": "fromName",
        "fieldType": "text",
        "helptext": "The name of the agent or customer who sent the ticket."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "To email address",
      "properties": {
        "parameter": "toEmail",
        "fieldType": "text",
        "helptext": "The email address of the customer or mailbox that the ticket is addressed to."
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "To name",
      "properties": {
        "parameter": "toName",
        "fieldType": "text",
        "helptext": "The name of the customer or mailbox that the ticket is addressed to."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Subject",
      "properties": {
        "parameter": "subject",
        "fieldType": "text",
        "helptext": "The email subject of your ticket."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Body",
      "properties": {
        "parameter": "body",
        "fieldType": "textarea",
        "helptext": "The body of the first comment to add to the ticket."
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "Is this a private note?",
      "properties": {
        "parameter": "note",
        "fieldType": "radio",
        "choices": [
            {"key": "true", "value": "Yes"},
            {"key": "false", "value": "No"}
        ],
        "default": "false",
        "classes": "inline",
        "helptext": "When creating a ticket from an agent, should the message body be added as a private note?"
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Send copy to customer?",
      "properties": {
        "parameter": "sendCopyToCustomer",
        "fieldType": "radio",
        "choices": [
            {"key": "true", "value": "Yes"},
            {"key": "false", "value": "No"}
        ],
        "default": "false",
        "classes": "inline",
        "helptext": "When creating a ticket from an agent, should the message be emailed to the customer?"
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "State",
      "properties": {
        "parameter": "state",
        "fieldType": "radio",
        "choices": [
          "unread",
          "opened",
          "pending",
          "closed",
          "spam"
        ],
        "default": "unread",
        "classes": "inline",
        "helptext": "The ticket state."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Assignee email",
      "properties": {
        "parameter": "assigneeEmail",
        "fieldType": "text",
        "helptext": "The email of the agent to assign the ticket to."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Assignee group",
      "properties": {
        "parameter": "assigneeGroup",
        "fieldType": "text",
        "helptext": "The name of the assigned group."
      },
      "readonly": false,
      "required": false,
      "visible": true
    },
    {
      "label": "Tags",
      "properties": {
        "parameter": "tags",
        "fieldType": "text",
        "default": "{}",
        "helptext": "A list of tag names, seperated by commas."
      },
      "readonly": false,
      "required": false,
      "visible": true
    }
  ],
  "headers": {
    "Authorization": "Bearer {auth.oauth2Token}"
  },
  "method": "POST",
  "endpoint": "https://api.groovehq.com/v1/tickets",
  "request": {
    "to": {
      "email": "{field.toEmail}",
      "name": "{field.toName}"
      },
    "from": {
      "email": "{field.fromEmail}",
      "name": "{field.fromName}"
      },
    "subject": "{field.subject}",
    "body": "{field.body}",
    "note": "{string_to_boolean(field.note)}",
    "send_copy_to_customer": "{string_to_boolean(field.sendCopyToCustomer)}",
    "state": "{field.state}",
    "assignee": "{field.assigneeEmail}",
    "assignee_group": "{field.assigneeGroup}",
    "tags": "{string_to_hash(field.tags)}"
  },
  "response": {
    "success": "",
    "error": {}
  }
}
