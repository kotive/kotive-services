{
  "name": "Send a smart email",
  "description": "To send a smart email.",
  "documentation": "https://www.campaignmonitor.com/api/transactional/#send_a_smart_email",
  "fields": [
    {
      "label": "Smart email ID",
      "properties": {
        "parameter": "smartEmailId",
        "fieldType": "text",
        "helptext": "The unique id of the smart email to send."
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "To",
      "properties": {
        "parameter": "to",
        "fieldType": "text",
        "helptext": "Enter the email address of the recipient of the smart email. Multiple emails adresses can be entered and must be separated by a comma. For example: joesmith@example.com,jamesmith@example.com"
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "CC",
      "properties": {
        "parameter": "cc",
        "fieldType": "text",
        "helptext": "Enter the email address of the CC recipient of the smart email. Multiple emails adresses can be entered and must be separated by a comma. For example: joesmith@example.com,jamesmith@example.com"
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "BCC",
      "properties": {
        "parameter": "bcc",
        "fieldType": "text",
        "helptext": "Enter the email address of the BCC recipient of the smart email. Multiple emails adresses can be entered and must be separated by a comma. For example: joesmith@example.com,jamesmith@example.com"
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "Data",
      "properties": {
        "parameter": "data",
        "fieldType": "text",
        "helptext": "Properties will be available in your email as variables which can be referenced using our <a href='https://www.campaignmonitor.com/create/' target='_blank'>Template Language</a>. Read more about smart transactional email variables and how to use them in your email in <a href='https://help.campaignmonitor.com/topic.aspx?t=1291' target='_blank'>our transactional support documentation</a>."
      },
      "readonly": false,
      "required": true,
      "visible": true
    },
    {
      "label": "Add recipients to list",
      "properties": {
        "parameter": "addRecipientsToList",
        "fieldType": "radio",
        "choices": [
          {"key": "true", "value": "Yes"},
          {"key": "false", "value": "No"}
        ],
        "default": "true",
        "classes":"inline"
      },
      "readonly": false,
      "required": true,
      "visible": true
    }
  ],
  "method": "POST",
  "endpoint": "/transactional/smartEmail/{field.smartEmailID}/send",
  "request": {
    "To": "{comma_to_array_or_null(field.to)}",
    "CC": "{comma_to_array_or_null(field:cc)}",
    "BCC": "{comma_to_array_or_null(field:bcc)}",
    "Data": "{string_to_hash(field.data)}",
    "AddRecipientsToList": "{string_to_boolean(field.addRecipientsToList)}"
  },
  "response": {
    "success": "",
    "error": ""
  }
}